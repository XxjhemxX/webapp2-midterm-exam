<!DOCTYPE html>
<html>


<script>
// Task 1: Simple synchronous code (5 marks)
//   Create a straightforward synchronous code snippet that displays this output in the console.

console.log("statement 1");
console.log("statement 2");
console.log("statement 3");
console.log("statement 4");

// Task 2: Simple asynchronous code (5 marks)
//   Create a straightforward asynchronous code snippet utilizing the setTimeout() function to display the following output in the console.

console.log("statement 1");

setTimeout(() => {
  console.log("statement 2");

  setTimeout(() => {
    console.log("statement 3");

    setTimeout(() => {
      console.log("statement 4");

      setTimeout(() => {
        console.log("undefined");
      }, 1000);
    }, 1000);
  }, 1000);
}, 1000);

// Task 3: Simple Http Request using XMLHttpRequest (5 marks)
//   Fill in the missing parts of the code to produce the specified output.

const request = new XMLHttpRequest();

const url = 'https://jsonplaceholder.typicode.com/todos/1';
request.open('GET', url);

request.addEventListener('readystatechange', () => {
  if (request.readyState === 4 && request.status === 200) {
    console.log(request.responseText);
  }
});

request.send();


// Task 4: Using a simple callback, return a json response (5 marks)
//   Fill in the missing parts of the code to produce the specified output.

const getTodos = (callback) => {
  const request = new XMLHttpRequest();
  request.addEventListener('readystatechange', () => {
    if (request.readyState === 4 && request.status === 200) {
      const data = JSON.parse(request.responseText);
      callback(undefined, data);
    } else if (request.readyState === 4) {
      callback('could not fetch data', undefined);
    }
  });

  const url = 'https://jsonplaceholder.typicode.com/todos/1';
  request.open('GET', url);

  request.send();
}
getTodo((err, data) => {
  if (err) {
    console.log(err);
  } else {
    console.log(data);
  }
});

// Task 5: Using Promise, return a json response (5 marks)
//   Fill in the missing parts of the code to produce the specified output.

const getTodo = () => {
   return new Promise((resolve, reject) => {
       const request = new XMLHttpRequest();
       request.addEventListener('readystatechange', () => {
           if (request.readyState === 4 && request.status === 200) {
               const data = JSON.parse(request.responseText);
               resolve(data);
           } else if (request.readyState === 4) {
               reject('Could not fetch data');
           }
       });
       const url = 'https://jsonplaceholder.typicode.com/todos/1';
       request.open('GET', url);
       request.send();
   });
}

getTodo().then(data => {
   console.log('promise resolved:', data); 
}).catch(err => {
   console.log('promise rejected:', err);
});

// Task 6: Using Fetch, return a json response (5 marks)
//   Fill in the missing parts of the code to produce the specified output.

fetch('https://jsonplaceholder.typicode.com/todos/1').then(response => {
    console.log('resolved:', response);
    return response.json();
  })
  .then(data => {
    console.log('data:', data);
  })
  .catch(err => {
    console.log('rejected:', err);
  });

// Task 7 (Optional): Using async and await, return a json response (+5 additional marks if answered correctly)
//   Fill in the missing parts of the code to produce the specified output.

  const getTodos = (MISSING CODE) () => {
const response = (MISSING CODE) fetch('https://jsonplaceholder.typicode.com/todos/1');
if (response.status !== 200) {
   throw new reject ('cannot fetch the data');
}
const data = await response.(MISSING CODE);
return (MISSING CODE);
}
getTodos()
.then(data => console.log('resolved:', data))
.catch(err => console.log('rejected:', err.message));

</script>
